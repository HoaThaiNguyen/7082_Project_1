{% extends 'layout.html' %}
{% load static %}

{% block title %}Schedule{% endblock %}

{% block head %}
  <!-- External dependencies -->
  <script src="{% static 'js/daypilot-javascript.min.js' %}"></script>
  <link rel="stylesheet" href="{% static 'css/schedule.css' %}">
{% endblock %}

{% block content %}
<section class="schedule-container">
  <h1 class="schedule-title">Select Your Availability</h1>

  
  <div id="schedule"></div>
  <button 
    onclick="saveAvailability(dpCalendar)" 
    class="btn-nav" console.log("Saving availability...");>
    Save Availability
</button>

<div class="mt-4 text-sm text-gray-600">
    <a href="/events/" class="text-primary-200 underline hover:text-primary-100">
    ‚Üê Back to Events
</a>
</div>
  
<script>
    window.eventId = "{{ event.event_id }}";
  </script>
  <script src="{% static 'js/schedule.js' %}"></script>

  

  <!-- Initialize calendar when the page loads -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const today = "{{ today|date:'Y-m-d' }}";
      window.initScheduleCalendar(today);
    });
  </script>

</section>
{% endblock %}
