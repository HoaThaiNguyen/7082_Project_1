<div x-show="open" @click.away="open = false"
     class="z-50 max-w-[500px] w-3/4 absolute top-24 right-12 bg-primary-100 border-2 border-dark p-4">

    <div class="flex flex-row justify-between">
        <h2 class="text-white">Notifications</h2>
        <button @click="open = false" class="text-2xl cursor-pointer duration-300 transition-colors text-white">âœ–</button>
    </div>

    <template class="overflow-y-auto h-[50vh] max-h-[600px] my-4" x-for="notification in notifications" :key="notification.id" x-show="notification.id">
        <!-- Use :href to bind the link dynamically -->
        <a :href="notification.url"
        @click.prevent = "notificationClicked(notification)"

        class="border-2 transition-colors bg-white cursor-pointer hover:bg-gray-200 border-black rounded-lg p-4 flex md:flex-row flex-col text-black mb-4 relative">

            <div x-show='!notification.is_read' class="z-50 w-4 h-4 rounded-full top-4 right-12 absolute bg-notify"></div>

            <div class="md:text-4xl text-3xl pr-4">ðŸ“§</div>
            <div>
                <h3 x-text="notification.title"></h3>
                <p x-text="'From: ' + notification.from_user__username + ', To: ' + notification.to_user__username"></p>
                <p x-text="notification.description"></p>
            </div>
        </a>
    </template>

    <template x-if="!notifications || notifications.length === 0">
        <p class="text-white py-2">You do not have any notifications.</p>
    </template>

    {% include './modal.html' with id="deleteModal" title="Clear notifications?" content="Warning, all notifications will be lost and you will not be able to get them back!" %}

    <template x-if="notifications && notifications.length > 0">
        <button @click="$dispatch('open-modal', 
        { id: 'deleteModal', action:() => clearNotifications(notifications) })" class="btn btn-secondary">Clear</button>
    </template>

</div>