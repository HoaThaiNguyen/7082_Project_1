<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>
        {% block title %}
            Kairos App
        {% endblock %}
    </title>

    <link rel="stylesheet" href="{% static 'dist/style.css' %}">
    <script src="{% static 'js/main.js' %}" defer></script>
    <title>Layout Document</title>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

</head>
<body class="bg-light">
    <nav class="bg-gradient-to-r from-primary-200 to-secondary p-4 flex flex-row justify-between items-center">
        <div>
            <a href="/events" class="text-4xl">üè†</a>
            <button class="btn-nav">Create Event</button>
            <button class="btn-nav">Attend Event</button>
        </div>
        
        <div class="flex flex-row space-x-4" id="nav-buttons">
            <a id="loginLink" href="/login" class="btn-nav">Login</a>
            <button id="logoutBtn" onclick="logoutUser()" class="btn-nav transition hidden">
                Logout
            </button>
            <button class="text-4xl cursor-pointer">üîî</button>
            <div class="w-12 h-12 rounded-full bg-dark cursor-pointer"></div>
        </div>

        
    </nav>
    <main>
        {% block content %}
        {% endblock %}
    </main>
    <script src="//unpkg.com/alpinejs" defer>
    </script>
    <script>
        function logoutUser() {
          console.log("Logging out...");
          localStorage.removeItem('access');
          localStorage.removeItem('refresh');
          window.location.href = '/login/';
        }
      
        document.addEventListener('DOMContentLoaded', () => {
          const token = localStorage.getItem('access');
          const loginLink = document.getElementById('loginLink');
          const logoutBtn = document.getElementById('logoutBtn');
      
          if (token) {
            loginLink.classList.add('hidden');
            logoutBtn.classList.remove('hidden');
          } else {
            loginLink.classList.remove('hidden');
            logoutBtn.classList.add('hidden');
          }
        });
      </script>
</body>
</html>